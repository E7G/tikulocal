# 开发指南

## 环境准备

1. 安装 Rust 1.70+
2. 安装 Python 3.8+ (用于运行脚本)
3. 安装 SQLite 3

## 开发流程

### 1. 克隆项目
```bash
git clone https://github.com/E7G/tikulocal.git
cd tikulocal
```

### 2. 安装依赖
```bash
# 安装Rust依赖
cargo build

# 安装Python依赖
pip install -r scripts/tests/requirements.txt
```

### 3. 运行项目
```bash
cargo run
```

### 4. 测试
```bash
# 运行Rust测试
cargo test

# 运行Python测试
python scripts/tests/run_all_tests.py
```

## 代码结构

### 后端 (Rust)
- `src/main.rs`: 应用程序入口点
- `src/db.rs`: 数据库操作和业务逻辑
- `src/handlers.rs`: HTTP请求处理器
- `src/models.rs`: 数据模型定义

### 前端
- `static/index.html`: 单页面应用

### 脚本
- `scripts/python/`: 数据库相关脚本
- `scripts/data-processing/`: 数据处理脚本
- `scripts/tests/`: 测试脚本

## 数据库操作

### 检查数据库内容
```bash
python scripts/python/check_db.py
```

### 重置数据库
```bash
python scripts/python/reset_db.py
```

### 数据库文件位置
数据库文件位于项目根目录下的 `questions.db`

## 数据处理

### 转换数据格式
```bash
python scripts/data-processing/convert_to_api_format.py input.json output.json
```

### 解析答案文件
```bash
python scripts/data-processing/parse_answers_to_json.py
```

## API接口

详细的API文档请参考: [docs/API接口文档.md](docs/API接口文档.md)

## 部署

### 构建发布版本
```bash
cargo build --release
```

### 运行发布版本
```bash
# Windows
./target/release/tikulocal.exe

# Linux/macOS
./target/release/tikulocal
```

### 数据库文件
数据库文件 `questions.db` 会在首次运行时自动创建，确保程序有写入权限。

## 贡献指南

1. Fork 项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。
# 字体功能测试指南

## 测试环境
- 操作系统: Windows 10/11
- Fyne版本: v2.6.1
- Go版本: 1.23.0

## 测试步骤

### 1. 启动程序
```bash
go run main.go
```

### 2. 字体加载测试
1. **查看日志输出**: 观察控制台日志中的字体加载信息
2. **验证字体加载**: 确认是否成功加载中文字体
3. **检查界面显示**: 验证中文内容是否正确显示

### 3. 中文显示测试
1. **界面文字**: 检查标题、按钮、标签等中文显示
2. **题目内容**: 查看题目中的中文字符显示
3. **选项和答案**: 验证选项和答案的中文显示
4. **状态信息**: 检查状态栏的中文提示

### 4. 字体优先级测试
1. **本地字体**: 如果有本地字体文件，验证是否优先使用
2. **系统字体**: 验证是否成功加载系统字体
3. **默认字体**: 确认后备字体机制正常工作

## 预期结果

### ✅ 成功情况
- 控制台显示字体加载成功日志
- 界面中文内容清晰显示
- 题目内容正确显示中文字符
- 没有字体相关的错误信息

### ❌ 失败情况
- 中文显示为方块或乱码
- 字体加载失败的错误信息
- 程序启动异常

## 日志分析

### 成功日志示例
```
2025/06/27 09:15:30 成功加载系统字体: C:/Windows/Fonts/msyh.ttc
2025/06/27 09:15:30 启动题库管理系统...
2025/06/27 09:15:30 数据库初始化成功
```

### 失败日志示例
```
2025/06/27 09:15:30 本地字体文件不存在: fonts/NotoSansCJKsc-Regular.otf
2025/06/27 09:15:30 加载系统字体失败: C:/Windows/Fonts/msyh.ttc - 错误信息
2025/06/27 09:15:30 使用Fyne默认字体
```

## 故障排除

### 常见问题
1. **中文显示为方块**
   - 检查系统是否安装了中文字体
   - 查看日志确认字体加载状态
   - 尝试手动安装中文字体

2. **字体加载失败**
   - 确认字体文件路径正确
   - 检查字体文件是否损坏
   - 验证字体文件格式

3. **程序启动缓慢**
   - 字体文件过大可能导致加载缓慢
   - 建议使用小于10MB的字体文件

### 调试方法
1. 查看控制台日志输出
2. 检查字体文件是否存在
3. 验证字体文件格式是否正确
4. 测试不同字体的加载情况

## 字体文件添加

### 添加本地字体
1. 下载支持中文的字体文件（如Noto Sans CJK）
2. 将字体文件放入 `fonts/` 目录
3. 重启程序测试字体加载

### 推荐字体
- **Noto Sans CJK SC**: Google开源中文字体
- **思源黑体**: Adobe开源中文字体
- **文泉驿微米黑**: 开源中文字体

## 测试完成

当所有测试通过后，字体功能应该能够正常工作：
- 程序能够正确加载中文字体
- 界面中文内容清晰显示
- 题目内容正确显示中文字符
- 字体加载有完善的错误处理机制 